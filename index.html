<!-- Needed to add this for live server to auto update -->
<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amnesia Restored</title>
  <!-- CSS styles -->
  <link id="styles" rel="stylesheet" type="text/css" href="css/dev.css">
  <link rel="stylesheet" href="scr/leaflet.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@700&family=Work+Sans&display=swap" rel="stylesheet">
  
  <!-- Addtional Scripts -->
  <script src="scr/leaflet.js"></script>
  <script src="scr/jquery/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>

</head>
<body>
  <div class="game">
    <!-- Game content -->
    <div class="sidebar">
      <button id="invbutton">INVENTORY</button>
      <button id="addrbutton">ADDRESS BOOK</button>
      <button id="mapbutton">MAP</button>
      <button id="xstreetbutton">X INDEXER</button>
    </div>
    
    <div id="container-o">
      <div id="currroom">CURRENT ROOM</div>
      <div id="playerio">
        <div id="map" style="background-color: #32302f"></div>

          <div id="output"></div>
        <!-- Player input -->
        <div class="input"><span class="ml-2" id="arrow">> </span><input id="input" autofocus spellcheck="false" autocomplete="off"></div>
      </div>
      
      <div class="statusbar">
        <div id="hunger">
          <div>img</div>
          <div>HUNGER</div>
        </div>
        <div id="fatigue">
          <div>img</div>
          <div>FATIGUE</div>
        </div>
        <div id="money">MONEY</div>
        <div id="time">TIME</div>
      </div>
    </div>
    
    <div class="sidebar" id="menubutton">
      <button>SAVE</button>
      <button>SETTINGS</button>
      <button>HELP</button>
    </div>

    <div id="address">ADDRESS</div>

    <div id='xStreetIndex'>
      <form>
        <label for="x-Streets">Choose A Number and Cross Street</label>
        <select name="Street Number" id="streetNumber">
          <option value='0-199'>0-199</option>
          <option value="200-299">200-299</option>
          <option value="300-399">300-399</option>
          <option value="400-499">400-499</option>
          <option value="500-599">500-599</option>
          <option value="600-699">600-699</option>
          <option value="700-799">700-799</option>
          <option value="800-899">800-899</option>
          <option value="900-999">900-999</option>
          <option value="1000-1099">1000-1099</option>
          <option value="1100-1199">1100-1199</option>
          <option value="1200-1299">1200-1299</option>
          <option value="1300-1399">1300-1399</option>
          <option value="1400-1499">1400-1499</option>
          <option value="1500-1599">1500-1599</option>
          <option value="1600-1699">1600-1699</option>
          <option value="1700-1799">1700-1799</option>
          <option value="1800-1899">1800-1899</option>
          <option value="1900-1999">1900-1999</option>
          <option value="2000-2099">2000-2099</option>
          <option value="2100-2199">2100-2199</option>
          <option value="2200-2299">2200-2299</option>
          <option value="2300-2399">2300-2399</option>
          <option value="2400-2499">2400-2499</option>
          <option value="2500-2599">2500-2599</option>
          <option value="2600-2699">2600-2699</option>
          <option value="2700-2799">2700-2799</option>
          <option value="2800-2899">2800-2899</option>
          <option value="2900-2999">2900-2999</option>
          <option value="3000-3099">3000-3099</option>
        </select>

        <select name="Cross Street" id="crossStreet">
          <option value="riverside">Riverside</option>
          <option value="park">Park</option>
          <option value="madison">Madison</option>
          <option value="lexington">Lexington</option>
          <option value="broadway">Broadway</option>
          <option value="10th">10th</option>
          <option value="9th">9th</option>
          <option value="8th">8th</option>
          <option value="7th">7th</option>
          <option value="6th">6th</option>
          <option value="5th">5th</option>
          <option value="4th">4th</option>
          <option value="3rd">3rd</option>
          <option value="2nd">2nd</option>
          <option value="1st">1st</option>
        </select>

        <input type="text" id="result">

        <!-- <input type="submit" value="Submit"> -->
      </form>

      <button id="submitButton">Go!</button>
      
    </div>

    <div id="inv">INV
      <div class="inventorygrid">
        <div>1</div>
        <div>2</div>
        <div>3</div>
        <div>4</div>
        <div>5</div>
        <div>6</div>
        <div>7</div>
        <div>8</div>
        <div>9</div>
        <div>10</div>
        <div>11</div>
        <div>12</div>
      </div>
    </div>

  </div>
  
  
  <script type="text/javascript">
//Creating the Map
  //var map = L.map('map').setView([0, 0], 0);
  var map = L.map('map', {center:[0, 0], zoom: 4, attributionControl: false});
  map.invalidateSize();
  setTimeout(function(){ map.invalidateSize(true)}, 300);
  L.tileLayer('map/{z}/{x}/{y}.png', {
    continuousWorld: false,
    noWrap: true,	
    minZoom: 3,
    maxZoom: 6,
  }).addTo(map);

//Coordinate Finder
  var marker = L.marker([0, 0], {draggable: true,}).addTo(map);
  marker.bindPopup('LatLng Marker').openPopup();
  marker.on('drag', function(e) {
    marker.getPopup().setContent("Lat, Lng[" + marker.getLatLng().lat.toFixed(3).toString() + ", " + marker.getLatLng().lng.toFixed(3).toString() + "]").openOn(map);
    //marker.getPopup().setContent(marker.getLatLng().lat.toFixed(3).toString() + ", " + marker.getLatLng().lng.toFixed(3).toString()).openOn(map);
    marker.on('dragend', function(e) {
    navigator.clipboard.writeText(marker.getLatLng().lat.toFixed(3) + ', ' + marker.getLatLng().lng.toFixed(3));
  })
  });


//Markers are located in a separate JavaScript file for more modularity, cleanliness, and readability.
//let playerMarker = L.marker([2, 2], {draggable: true}).addTo(map).bindPopup('LatLng:').openPopup();

//MAP BUTTON
/*const targetDiv = document.getElementById("map");
  const btn = document.getElementById("mapbutton");
  btn.onclick = function () {
  if (targetDiv.style.display !== "none") {
    targetDiv.style.display = "none";
  } else {
    targetDiv.style.display = "block";
    map.invalidateSize();
  }
};*/

$("#mapbutton").click(function() {
  $("#map").slideToggle();
  map.invalidateSize();
  $("#output").slideToggle();
  $(".input").slideToggle();
  setTimeout(function(){ map.invalidateSize()}, 400);
})

//INVENTORY BUTTON
const invDiv = document.getElementById("inv");
  const invBtn = document.getElementById("invbutton");
  invBtn.onclick = function () {
  if (invDiv.style.display !== "none") {
    invDiv.style.display = "none";
  } else {
    invDiv.style.display = "block";
  }
};

//ADDRESS BUTTON
const addrDiv = document.getElementById("address");
  const addrBtn = document.getElementById("addrbutton");
  addrBtn.onclick = function () {
  if (addrDiv.style.display !== "none") {
    addrDiv.style.display = "none";
  } else {
    addrDiv.style.display = "block";
  }
};


//x street indexer open button
const xStreetDiv = document.getElementById("xStreetIndex");
  const xStreetBtn = document.getElementById("xstreetbutton");
  xStreetBtn.onclick = function () {
  if (xStreetDiv.style.display !== "none") {
    xStreetDiv.style.display = "none";
  } else {
    xStreetDiv.style.display = "block";
  }
};

//x street indexer submit button

</script>



  <!-- Include game engine -->
  <!-- Be sure to load in dependencies first -->
  <script src="scr/text-engine/parser.js"></script>
  <script src="scr/text-engine/init.js"></script>
  <script src="scr/text-engine/pcommand.js"></script>
  <script src="scr/text-engine/internalfunc.js"></script>
  <script src='scr/text-engine/playercharacter.js'></script>


  <!-- Include game data ('disk') -->
  <script src="scr/text-engine/game-disks/streets.js"></script>

<!-- Load disk into engine -->
<script>loadDisk(streets);</script>
<script src='scr/text-engine/markers.js'></script>
</body>
